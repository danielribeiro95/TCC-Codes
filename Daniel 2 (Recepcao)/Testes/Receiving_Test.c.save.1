#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pigpio.h>
//We're gonna use GPIO2 as output

int main()
{

	if (gpioInitialise()<0)
	{
		printf("Initialisation Failed \n");
	}


	else
	{

	// ------------------------------------ RECEPTION -----------------------------------

	gpioSetMode(2,0); //2 => In

	int file[size]; //Contains the file

	for(int i = 0; i<=size-1; i++){
	file[i] = fgetc(file_read) - '0';
	printf("%d", file[i]);		//Reading into the file the bits
	}


	printf("\n");

	fclose(file_read);


	// -------------------------------------------- TRANSMISSION ------------------------------------------------

	for (int i = 0; i < size; i++){
	gpioWrite(2,file[i]);
	gpioDelay(1000);
	}



	gpioTerminate();
	return 0;
	}
}
